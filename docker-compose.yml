version: "3.8"

services:
  qdrant:
    image: qdrant/qdrant:latest
    container_name: qdrant
    restart: unless-stopped
    ports:
      - "6333:6333"   # REST API
      - "6334:6334"   # gRPC (optional, for high-performance clients)
    environment:
      # API key loaded from .env file
      - QDRANT__SERVICE__API_KEY=${QDRANT_API_KEY}
      - QDRANT__LOG_LEVEL=INFO
    volumes:
      # Persistent storage - adjust path as needed
      - /opt/qdrant/storage:/qdrant/storage
      - /opt/qdrant/snapshots:/qdrant/snapshots
    # Note: Qdrant's minimal container image doesn't include curl/wget for security.
    # Health can be checked externally: curl http://localhost:6333/healthz
    # Or use Docker's restart policy (already set to unless-stopped)

networks:
  default:
    name: qdrant-network
